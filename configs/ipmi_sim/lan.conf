# ipmi_sim LAN Configuration
# OpenIPMI simulator configuration for BMC emulation

name "qemu-bmc"

# Work on the BMC first
set_working_mc 0x20

  # Define a LAN channel on channel 1
  startlan 1
    # Listen on all interfaces, port 623
    addr 0.0.0.0 623

    # Maximum privilege limit on the channel
    priv_limit admin

    # Allowed IPMI 1.5 authorization types
    allowed_auths_callback none md2 md5 straight
    allowed_auths_user none md2 md5 straight
    allowed_auths_operator none md2 md5 straight
    allowed_auths_admin none md2 md5 straight

    # GUID for IPMI 2.0 authorization
    guid a123456789abcdefa123456789abcdef
  endlan

  # Chassis control script (Phase 4)
  # Handles power, reset, boot device via external script
  chassis_control "/scripts/chassis-control.sh 0x20"

  # Serial Over LAN configuration (Phase 6)
  # Connect to QEMU serial console via TCP bridge
  # Format: sol tcp:address:port baud
  sol "tcp:localhost:9002" 115200

  # User configuration
  # user <num> <enabled> <username> <password> <priv> <max-sess> <allowed-auths>
  user 1 true  ""        "test"     user  10 none md2 md5 straight
  user 2 true  "admin"   "password" admin 10 none md2 md5 straight
